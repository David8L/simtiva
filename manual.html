<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="stylesheet" href="styles.css">
	<link href="css/fontawesome.min.css" rel="stylesheet"> 
	<link href="css/regular.min.css" rel="stylesheet"> 
	<link href="css/solid.min.css" rel="stylesheet">
	<link href="css/brands.min.css" rel="stylesheet"> <!--font awesome-->
	<meta name="theme-color" content="#7B8092">
	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
	<link rel="apple-touch-icon" href="apple-touch-icon.png" />
	<link rel="apple-touch-icon" sizes="57x57" href="apple-touch-icon-57x57.png" />
	<link rel="apple-touch-icon" sizes="72x72" href="apple-touch-icon-72x72.png" />
	<link rel="apple-touch-icon" sizes="76x76" href="apple-touch-icon-76x76.png" />
	<link rel="apple-touch-icon" sizes="114x114" href="apple-touch-icon-114x114.png" />
	<link rel="apple-touch-icon" sizes="120x120" href="apple-touch-icon-120x120.png" />
	<link rel="apple-touch-icon" sizes="144x144" href="apple-touch-icon-144x144.png" />
	<link rel="apple-touch-icon" sizes="152x152" href="apple-touch-icon-152x152.png" />
	<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon-180x180.png" />

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
    <meta charset="utf-8">
	<meta name="description" content="Simple and free TIVA simulator">
    <meta name="keywords" content="simtiva, tiva, tci, free, simulator, calculator, terence, luk, propofol, remifentanil, alfentanil, app, smartphones, apple, android">
    <meta name="author" content="Terence Luk">
    <title>SimTIVA Manual</title>
</head>
<body>
	<div id="menu2">
		<div class="menucontent">
		</div>
	</div>
	<div class="hamburgermanual" id="hamburgermanual" onclick="togglemenu2();">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
    </div>
    <div class="m-aside">
		<div class="m-header">
			<div class="m-header-left"></div>
			<div class="m-header-right"><div id="chapternum"></div><div id="chaptername">SimTIVA manual</div></div>
			<div class="m-header-close"></div>
		</div>
		<div class="m-subheader">
			<div class="m-subheader-icon">&nbsp;</div>
			<div class="m-subheader-left"></div>
			<div class="m-subheader-right"><span id="subheaderdropdown" onclick="toggleOnThisPage();"><i class="fas fa-chevron-down"></i></span></div>
		</div>
		<div class="m-onthispageexpand hide">
			<div id="onthispagetitle">On this page</div>
			<div id="onthispage">
			</div>
		</div>
	</div> <!-- end m-aside -->
	<div class="m-body">
		<div style="height:75px" class="m-body-placeholder">&nbsp;</div>
	<div class="m-main" id="m-main-beginning" data-name="Welcome" data-number="0">
		<p>Welcome to SimTIVA Manual</p>
		<p>This is the user manual for simtiva.app, a web app to simulate target-controlled infusion (TCI).</p>
		<p>Select a chapter to view</p>
		<p><button onclick="getChapter(1)">1</button><button onclick="getChapter(2)">2</button><button onclick="getChapter(3)">3</button><button onclick="getChapter(4)">4</button></p>
		<p>On this page <button onclick="populateOnThisPage();">UPDATE</button></p>

	</div>
		<div class="m-main" id="m-main-chapter1" data-name="Getting Started" data-number="1"> <!--start m-main-->
			<p class="m-h1">Getting Started</p>
			<section id="1-1" data-heading="Entering patient data">
				<div class="m-image-container">
					<img src="manualresources/ss-1-startscreen1.png">
				</div>
				<p>On the first screen, you may enter patient characteristics and choose a model. According to the model, there may be different patient parameters that are required. On the top, you can choose between "Adult" and "Paediatric" modes. For opioids, you will be required to enter the dilution.</p>
			
			
				<p class="m-h3">Validation</p>
				<p>Data validation is applied to data input. BMI, weight-for-age & length-for-age are displayed where available, according to WHO definitions and Child Growth Standards. Extreme body habitus will invoke a warning prompt.</p>
			
			
				<p class="m-h3">Paediatric patient</p>
				<p>In the paediatric mode, additional features are provided:</p>
				<ul>
					<li>Unit of age: y/m/d</li>
					<li>Post-menstrual age: coparameter in Eleveld model - prematurity affects clearance in <6months</li>
					<li>Validation of weight with WHO Child Growth Standards</li>
					<li>Custom opioid dilution</li>
					<li>Age-dependent estimated BIS for Eleveld model</li>
				</ul>
				<p>Other features that exist on adult patients are also provided for the paediatric patient, e.g. complex mode and PD interaction of propofol-opioid.</p>
				<p>In the following video demo, propofol and remifentanil CET regimens are simulated in children. Remifentanil dilution can be customized.</p>
				<div class="m-video-container">
					<blockquote class="twitter-tweet" data-media-max-width="560"><p lang="en" dir="ltr">Paediatric <a href="https://twitter.com/hashtag/TIVA?src=hash&amp;ref_src=twsrc%5Etfw">#TIVA</a> with <a href="https://t.co/qLpMHjFA1Q">https://t.co/qLpMHjFA1Q</a> (1/3)<a href="https://t.co/KXov8b2dRM">https://t.co/KXov8b2dRM</a> has TCI functions specially designed for children, but not as an afterthought. In this video, propofol and remifentanil CET regimens are simulated. Remifentanil dilution can be customized. <a href="https://t.co/1jMePtz0kp">pic.twitter.com/1jMePtz0kp</a></p>&mdash; SimTIVA (@simtiva_app) <a href="https://twitter.com/simtiva_app/status/1705766533837046231?ref_src=twsrc%5Etfw">September 24, 2023</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
				</div>
			</section>
			<section id="1-4" data-heading="Drugs and models">
				<p class="m-h2">Drugs and models</p>
				<p>The available models are: </p>
				<ul>
					<li>Propofol: Eleveld, Marsh, Schnider, Paedfusor</li>
					<li>Remifentanil: Minto, Eleveld</li>
					<li>Fentanyl: Shafer</li>
					<li>Alfentanil: Maitre</li>
					<li>Complex mode: to simulate the combination of propofol and opioids, select "Complex (Dual mode)" in "Model" on the first screen. This will allow you to enter data for propofol and opioid on the second screen.
				</ul>
			</section>
			<section id="1-5" data-heading="Mode selection">
				<p class="m-h2">Mode selection screen</p>
				<p>After selecting a model, you may choose one of four infusion modes, namely CP targeting, CE targeting, manual bolus & infusion, and intermittent bolus. These will be explained in detail in Chapter 2.</p>
				<div class="m-image-container">
					<img src="manualresources/ss-1-startscreen2.png">
				</div>
				<p>If you have selected "Complex (Dual mode)" in "Model" on first screen, you can customize your propofol and opioid information on the second screen. For example, the PK model and drug dilution can be entered.</p>
				<div class="m-image-container">
					<img src="manualresources/ss-1-start-complex.png">
				</div>
			</section>
			<section id="1-6" data-heading="Installation/Download">
				<p class="m-h2">Installation/Download</p>
					<p>Simtiva.app is a website that can function as a web application. This means that you may run it inside your web browser (Safari on iPhone, Chrome on Android, or other browsers on desktop), or you may choose to install it directly through your browser. Once it is installed, it adds an icon to your homescreen that acts as the shortcut to the app and it can also be used offline - without internet access. Demos for installation on iPhone and Android illustrated below:</p>
				<p class="m-h3">iPhone iOS Safari:</p>
				<div class="m-video-container">
					<blockquote class="twitter-tweet" data-media-max-width="560"><p lang="en" dir="ltr">Did you know...?<a href="https://t.co/KXov8b2dRM">https://t.co/KXov8b2dRM</a> is a progressive web app (PWA). It can function like any other webpage on your browser on mobiles &amp; computers.<br><br>What&#39;s more, u can install it on your iPhone (see video/screenshot) by clicking share -&gt; add to homescreen.<a href="https://twitter.com/hashtag/TIVA?src=hash&amp;ref_src=twsrc%5Etfw">#TIVA</a> <a href="https://twitter.com/hashtag/TCI?src=hash&amp;ref_src=twsrc%5Etfw">#TCI</a> <a href="https://t.co/t5zCk67GY5">pic.twitter.com/t5zCk67GY5</a></p>&mdash; SimTIVA (@simtiva_app) <a href="https://twitter.com/simtiva_app/status/1725058259210649691?ref_src=twsrc%5Etfw">November 16, 2023</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
				</div>
				<p class="m-h3">Android Chrome:</p>
				<p>Select "Install App" from the <span class="m-icon-inline"><i class="fas fa-ellipsis-v"></i></span> menu button.
				</p>
				<div class="m-image-container">
					<img src="manualresources/ss-1-install-android-chrome.jpg">
				</div>
			</section>
		</div>
		<div class="m-main" id="m-main-chapter2" data-name="Running Simulations" data-number="2">

			<p class="m-h1">Simulation modes</p>
			<section id="2-1" data-heading="Introduction">
				<p>There are 4 modes for single-drug simulation, namely CP targeting (plasma site targeting), CE targeting (effect site targeting), manual mode, or intermittent bolus mode. In addition there is a "Complex (Dual mode)" to simulate simultaneous infusions of propofol in combination with an opioid of your choice.</p>
				<p>The pharmacokinetic calculations are based on STANPUMP, created by Steven Shafer, freely available from opentci.org. Full credits and details available on "About" screen.</p>
				<p class="m-h3">Caution on accuracy</p>
				<p>Please note that SimTIVA is a computer simulation program only to simulate the delivery of TIVA using a TCI pump; but it has no physical connection interface with a syringe pump. SimTIVA is designed in a way such that the user is assumed to have multiple busy tasks at hand and may not be free to adjust pump settings very frequently (say every 10 seconds). In a TCI pump, the infusion rates are updated frequently, e.g. every 10 seconds. However, in SimTIVA, the concept is to simplify the infusion regimen so that the infusion rates need to be adjusted just several times per hour (definitely not every other second or minute), otherwise it will be too cumbersome for the anaesthetist looking after the patient to frequently alter the infusion rate on the pump. With this in mind, in CPT or CET mode, SimTIVA infusion regimen only requires you to change infusion rates for typically 5-7 times for the first hour or so. The downside of this is accuracy, SimTIVA will not be able to deliver a perfect CP/CE target because the CP/CE will fluctuate if the infusion rates are not adjusted very frequently. </p>
				<p class="m-h3">Realtime simulation</p>
				<p>SimTIVA is designed to run in real time, i.e. parallel to the actual time sequence of a clinical case. The clock (displayed on the top left corner) will start ticking the moment you start your simulation. For advanced feature in resetting the timeline, or going back partially or going forward in time, read Chapter 6 - Working with timeline.</p>
				<p class="m-h3">Overview of information display</p>
				<p>In all modes, the current CP and CE are displayed on top. A third box will also appear, indicating the infusion rate in ml/h, if an infusion is running. The main pharmacokinetic graph visualizes the plot of CP/CE values over time. If you are using the <span class="m-emphasis">Eleveld</span> propofol model, a box will appear below the main pharmacokinetic graph, showing the predicted bispectral index (BIS) value, which is estimated from the Eleveld pharmacodynamic model.</p>
				<p>For a more detailed walkthrough on using graphs in SimTIVA, proceed to Chapter 4: Working with Graphs.</p>
			</section>
			<section id="2-2" data-heading="CP Targeting">
				<p class="m-h2">CP Targeting mode (plasma site)</p>
				<p>In this mode, you can enter a CP target. For example, setting a propofol target CP of 3mcg/ml using the Marsh model will give rise to the following infusion regimen. The current CP, CE, and infusion rate will be displayed at the top of the screen. The suggested infusion CPT regimen is listed under "Scheme" to guide you through the next rate changes to maintain your desired target concentration. On mobile devices, you may need to swap between "Graph" and "Scheme" displays.</p>
				<div class="m-image-container">
					<img src="manualresources/ss-2-cptmode.png">
				</div>
				<p class="m-h3">Preview box</p>
				<p>As you enter your CP target, a blue box will appear, suggesting the action for you to follow. For example, a bolus followed by an infusion in ml/h.</p>
				<div class="m-image-container">
					<img src="manualresources/ss-2-preview.png">
				</div>
				<p class="m-h3">Reminder box</p>
				<div class="m-image-container">
					<img src="manualresources/ss-2-warning.png">
				</div>
				<p>When the next infusion rate change is imminent, a red reminder box will remind you about it.</p>
			</section>
			<section id="2-3" data-heading="CE Targeting">
			<p class="m-h2">CE Targeting mode (effect site)</p>
				<p>In this mode, you can enter a CE target. Typically, the plasma concentration is allowed to overshoot to accomodate the fast achievement of CE towards target. Also, there is a pause after the initial bolus for CE to equilibrate with CP. For example, setting a propofol target CP of 3mcg/ml using the Eleveld model will give rise to the following infusion regimen. The current CP, CE, and infusion rate will be displayed at the top of the screen. The suggested infusion CET regimen is listed under "Scheme" to guide you through the next rate changes to maintain your desired target concentration. On mobile devices, you may need to swap between "Graph" and "Scheme" displays.</p>
				<div class="m-image-container">
					<img src="manualresources/ss-2-cetmode.png">
				</div>
				<p class="m-h3">Expanding the preview box</p>
				<p>As mentioned above, a preview box will appear as you enter a CE target. A practical tip is that you may expand the preview box by clicking "Expand" below the blue preview box to have a full understanding of the entire CET scheme before starting your infusion. Demo as below:</p>
				<div class="m-video-container">
					<blockquote class="twitter-tweet" data-media-max-width="560"><p lang="en" dir="ltr"><a href="https://t.co/4zrK2ZezXO">https://t.co/4zrK2ZezXO</a> first update in 2024. User interface of CET and CPT modes has been re-designed. More importantly, a full preview of scheme is available (click “expand”) so you can preview the new scheme before submitting it. Other bugfixes in changelog. <a href="https://t.co/05hZqyiVJD">pic.twitter.com/05hZqyiVJD</a></p>&mdash; SimTIVA (@simtiva_app) <a href="https://twitter.com/simtiva_app/status/1748538694238384591?ref_src=twsrc%5Etfw">January 20, 2024</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
				</div>
			</section>
			<section id="2-4" data-heading="Manual mode">
				<p class="m-h2">Manual mode</p>
				<p>In this mode, you can enter the bolus and infusion rate manually. The bolus input unit can be entered as ml, mg, or mg/kg for propofol, or ml, mcg, or mcg/kg for opioids. The infusion unit, similarly, can be configured on a volume, mass/time, or mass/body weight/time basis. You can change these units by clicking on the arrow <span style="padding: 4px; width: 2rem; background: #eee"><i class="fas fa-chevron-down"></i></span> next to the bolus/infusion input. The current CP, CE, and infusion rate will be displayed at the top of the screen.</p>
				<div class="m-video-container">
					<blockquote class="twitter-tweet" data-media-max-width="560"><p lang="en" dir="ltr">Wrapping up 2023 with a New feature (<a href="https://t.co/4zrK2ZezXO">https://t.co/4zrK2ZezXO</a>): Bolus &amp; Infusion units- U may now switch between “mg” vs “mg/kg” vs “ml” for bolus, “ml/h” vs “mg/kg/h” (or appropriate units) for infusion in manual mode.<br>Can switch by tapping the dropdown 🔽 or via “Options”.<br>(1/2) <a href="https://t.co/hCthkRDMbO">pic.twitter.com/hCthkRDMbO</a></p>&mdash; SimTIVA (@simtiva_app) <a href="https://twitter.com/simtiva_app/status/1736365967851331753?ref_src=twsrc%5Etfw">December 17, 2023</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
				</div>
			</section>
			<section id="2-5" data-heading="Intermittent bolus mode">
				<p class="m-h2">Intermittent bolus mode</p>
				<p>In this mode, a scheme of intermittent repeated boluses is generated to achieve and maintain a certain target effect site concentration. This is suitable in a setting, where there is no syringe pumps available, for example a short case in a remote location or in a low-resource environment. With the intermittent bolus mode, a series of repeated small manual boluses are generated, to simulate a target-controlled infusion as close as possible. The accuracy of the repeated intermittent bolus scheme is affecetd by the fluctuation of CE. Caution: this mode does not take into the account of adverse effects of administering boluses, especially in larger doses, for example, a drug such as remifentanil may not be suitable to be given in intermittent boluses due to side effects of bradycardia and apnoea.</p>
				<p>The bolus amount and time interval will vary according to the CE target as well as the anticipated level of fluctuation of CE - described as peak/trough levels in this app. The peak/trough levels represent the magnitude of fluctuation for Ce. For example, when set to ±5%, the Ce will reach a maximum of 105% of target and then drop to a minimum of 95% of target. At the trough level, another bolus will be administered, and the cycle repeats.</p>
				<p>Please see the example below, in a simulated patient, to achieve approximate CE target of 3mcg/ml using the Eleveld model for propofol:</p>
				<div class="m-image-container">
					<img src="manualresources/ss-2-IBmode-1.png">
				</div>
				<p>The information box will display a horizontal countdown bar as well as a timer to notify you of the next bolus amount.</p>
				<div class="m-image-container">
					<img src="manualresources/ss-2-IBmode-2-countdown.png">
				</div>
				<p>The generated scheme will result in a pharmacokinetic graph like the following. Note the fluctuation in CE in response to repeated boluses; within the preset margins of ±5% in this example. The CP values will fluctuate widely.</p>
				<div class="m-image-container">
					<img src="manualresources/ss-2-IBmode-3-graph.png">
				</div>
				<p>The scheme to achieve and maintain CE target of 3mcg/ml is given below.</p>
				<div class="m-image-container">
					<img src="manualresources/ss-2-IBmode-4-scheme.png">
				</div>
				<p>When the next bolus is about to be delivered, a warning prompt will appear to remind you of an upcoming bolus. The bolus amount will also flash on the top display box.</p> 
				<div class="m-image-container">
					<img src="manualresources/ss-2-IBmode-5-prompt.png">
				</div>
			</section>
			<section id="2-6" data-heading="Complex mode">
				<p class="m-h2">Complex (Dual) mode</p>
				<p>In this mode, you may run two-drug simulations simultaneously. For each drug, the functions for CP or CE targeting, manual infusion, or intermittent bolus mode are preserved. In addition, you may explore the pharmacodynamic (PD) interaction between propofol and opioid, as propofol and opioid demonstrate intense synergism. Probability of tolerance to laryngoscopy (PTOL) is used as a measure of potency of propofol-opioid combination. Isobologram charts illustrate the propofol-opioid combinations to achieve the same pharmacodynamic effect.</p>
				<p><b>For details, please read Chapter 7: Complex mode</b></p>
				<p>Isobologram: Using different combinations of CE-propofol and CE-remifentanil (effect-site concentrations of propofol and remifentanil respectively), all yielding the same predicted response (90% probability to tolerate laryngoscopy, PTOL90), a line (isobole) is drawn connecting all the possible combinations of CE-propofol/CE-remifentanil to achieve the same identical effect (van den Berg 2021). In our simulation programme, the same method is repeated for PTOL80, PTOL70... PTOL10 to generate a total of 9 isoboles on the 2-dimensional chart. The contour of the isoboles is typical of synergism, or supradditive interaction.</p>
				<p>For the opioid, you may choose to use remifentanil, fentanyl, or alfentanil. The program converts the CE into equivalent doses.</p>
				<p>Below is a video demostration of complex mode, with manual infusions of propofol and remifentanil. </p>
				<div class="m-video-container">
					<blockquote class="twitter-tweet" data-media-max-width="560"><p lang="en" dir="ltr">(4/5) <br>When is anaesthedia &quot;too deep&quot; or &quot;too light&quot;? <a href="https://t.co/KXov8b2dRM">https://t.co/KXov8b2dRM</a> enables PD modelling &amp; displays a &quot;green zone&quot; to mark the CE margins required to achieve PTOL50-90. In this example, CE is in the green zone but is predicted to fall below PTOL50 margin beyond 7.5min <a href="https://t.co/KJ0ICsQdeT">pic.twitter.com/KJ0ICsQdeT</a></p>&mdash; SimTIVA (@simtiva_app) <a href="https://twitter.com/simtiva_app/status/1702847358290280870?ref_src=twsrc%5Etfw">September 16, 2023</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
				</div>
			</section>
		</div><!--end m-main (ch2)-->
		<div class="m-main" id="m-main-chapter3" data-name="Options" data-number="3">
			<p class="m-h1">OPTIONS</p>
			<section id="3-1" data-heading="Changing options">
				<p>SimTIVA settings can be accessed on the welcome screen by clicking the <span style="display: inline-block; padding: 4px; width: 1.8rem; height: 1.8rem; background: #ddd; border-radius: 2rem"><i class="fas fa-cog fa-fw"></i></span> options button. Alternatively, you may change the options when simulation is running, by going to the options panel at the bottom of the page.</p>
				<p class="m-h3">Dark mode</p>
				<p>You can switch between Dark / Light modes by clicking on the floating icon <span style="display: inline-block; padding: 4px; width: 1.8rem; height: 1.8rem; background: #ddd; border-radius: 2rem"><i class='fas fa-adjust fa-fw'></i></span> / <span style="display: inline-block; padding: 4px; width: 1.8rem; height: 1.8rem; background: #ddd; border-radius: 2rem"><i class="fas fa-moon fa-fw"></i></span> at the right lower corner.</p>
				<p class="m-h3">Saving options</p>
				<p>All options are automatically saved, so that the next time you use SimTIVA the same settings are restored.</p>
			</section>
			<section id="3-2" data-heading="List of options">
				<p class="m-h2">List of options</p>
				<p>The options panel:</p>
				<div class="m-image-container">
					<img src="manualresources/ss-3-options.png">
				</div>
				<p><span class="m-emphasis">Unit:</span> the preferred secondary unit for propofol infusion. The primary unit is always ml/h. The secondary unit is used in prompts, reminders and schemes. An example is 50ml/h (10mg/kg/h). The US convention for propofol infusion is mcg/kg/m and you can change this unit here.</p>
				<p><span class="m-emphasis">Default rate unit:</span> this is the default rate unit for infusion in manual mode. You can switch between "ml/h" or "mg/kg/h", or appropriate units. This will not affect other modes, such as the CP/CE targeting mode. A video demo is shown below.</p>
				<p><span class="m-emphasis">Default bolus unit:</span> this is the default bolus unit for manual bolus in manual mode. You can switch between "ml", "mg", or "mg/kg" (or appropriate units).</p>
				<p><span class="m-emphasis">Simspeed:</span> the default is 1x (normal speed), and you can change it to 5x, 25x, or 50x, which will speed up the simulation.</p>
				<p><span class="m-emphasis">Threshold:</span> there are three options for the threshold/accuracy option: "Auto", "Lazy", or "Accurate". For CP/CE targeting, SimTIVA generates an infusion scheme to maintain the CP (or CE) approximately equal to the target. "Auto" threshold means that the program automatically determines the optimal balance between accuracy in maintaining the CP (or CE) while keeping the number of rate changes of the infusion scheme as infrequent as possible. "Lazy" means that the program will sacrifice accuracy of maintaining the target by keeping the number of infusion rate changes over time to a minimum. "Accurate" threshold setting will keep CP (or CE) value as close to target as possible, but this may increase the number of times you adjust the infusion rate in a CP/CE targeting scheme.</p>
				<P><span class="m-emphasis">Wakelock:</span> on a supported device, such as an Android device, setting Wakelock to "On" will keep the screen awake. If you are using iPhone, you may have to adjust the screen timeout in system preferences yourself.</p>
				<p><span class="m-emphasis">Vibrate:</span> when the next rate change is imminent in CP/CE targeting mode, SimTIVA will activate vibration as a reminder (supported devices only).</p>
				<p><span class="m-emphasis">Sound:</span> when the next rate change is imminent in CP/CE targeting mode, SimTIVA will sound an audio alarm (supported devices only).</p>
				<p><span class="m-emphasis">Notifications:</span> when the next rate change is imminent in CP/CE targeting mode, SimTIVA will activate system notification (supported devices only).</p>
			</section>
			<section id="3-3" data-heading="Infusion unit in manual mode">
				<p class="m-h3">Infusion unit in manual mode</p>
				<p>This is a video demo of altering the infusion and bolus units. You can also click the <span class="m-icon-inline"><i class="fas fa-chevron-down"></i></span> dropdown triangle next to the "Infusion rate" or "Bolus" entry fields to change these units. The conversion between ml/h and mg/kg/h is automatic.</p>
				<div class="m-video-container">
					<blockquote class="twitter-tweet" data-media-max-width="560"><p lang="en" dir="ltr">Wrapping up 2023 with a New feature (<a href="https://t.co/4zrK2ZezXO">https://t.co/4zrK2ZezXO</a>): Bolus &amp; Infusion units- U may now switch between “mg” vs “mg/kg” vs “ml” for bolus, “ml/h” vs “mg/kg/h” (or appropriate units) for infusion in manual mode.<br>Can switch by tapping the dropdown 🔽 or via “Options”.<br>(1/2) <a href="https://t.co/hCthkRDMbO">pic.twitter.com/hCthkRDMbO</a></p>&mdash; SimTIVA (@simtiva_app) <a href="https://twitter.com/simtiva_app/status/1736365967851331753?ref_src=twsrc%5Etfw">December 17, 2023</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
				</div>
			</section>
		</div><!--end m-main (ch3)-->
		<div class="m-main" id="m-main-chapter4" data-name="Working with Graphs" data-number="4">
			<p class="m-h1">Working with graphs</p>
			<section id="4-1" data-heading="Overview">
				<p class="m-h2">Overview</p>
				<p>On mobile devices, the main graph looks like this:</p>
				<div class="m-image-container">
					<img src="manualresources/ss-4-maingraph-annotated.png">
				</div>
				<ol type="A">
					<li><span class="m-emphasis">History/Scheme button:</span> shows "History" in manual mode and "Scheme" in CPT/CET mode</li>
					<li><span class="m-emphasis">Event button:</span> Annotate event at current time. You can edit the time and event details later on. Events are numbered and displayed at bottom of graph.</li>
					<li><span class="m-emphasis">Fullscreen button:</span> maximizes the graph and hides controls.</li>
					<li><span class="m-emphasis">Graph options button:</span> Opens the options panel - you can adjust the time scale among other options. The <span class="m-icon-inline"><i class="fas fa-search-plus"></i></span> and <span class="m-icon-inline"><i class="fas fa-search-minus"></i></span> buttons will change the time scale to show the entire timeline or just the current portion.</li>
				</ol>
			</section>
			<section id="4-2" data-heading="Quick view & time scale">
				<p class="m-h2">Video demo of quick view info box</p>
				<p>In this video demonstration, you can see that an info box appears in the main graph as move your cursor. (On mobile devices this means tapping on graph area, on desktop computers this means hovering over the graph area with mouse.) By highlighting a certain timepoint, the info box will display important data such as CP, CE, infusion rate, and estimated BIS (available in Eleveld propofol model only). This video also shows how you can adjust the time scale to show more (or less) of the timeline.
				<div class="m-video-container">
					<blockquote class="twitter-tweet" data-media-max-width="560"><p lang="en" dir="ltr"><a href="https://twitter.com/hashtag/tiva?src=hash&amp;ref_src=twsrc%5Etfw">#tiva</a> <a href="https://twitter.com/hashtag/tci?src=hash&amp;ref_src=twsrc%5Etfw">#tci</a> <a href="https://twitter.com/hashtag/anaesthesia?src=hash&amp;ref_src=twsrc%5Etfw">#anaesthesia</a><br>Showcasing the updated feature of <a href="https://t.co/qLpMHjFA1Q">https://t.co/qLpMHjFA1Q</a> - using Eleveld model, an estimated BIS value is displayed. The chart also shows the CE boundaries for BIS 40-60. This allows estimation of effect without pEEG.<br>Chart duration also extends to 2h. <a href="https://t.co/i6O9ITw7vv">pic.twitter.com/i6O9ITw7vv</a></p>&mdash; SimTIVA (@simtiva_app) <a href="https://twitter.com/simtiva_app/status/1701062106144190782?ref_src=twsrc%5Etfw">September 11, 2023</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
				</div>
			</section>
			<section id="4-3" data-heading="Graph options panel">
				<p class="m-h2">Graph options panel</p>
				<p>To open this panel, click the <span class="m-icon-inline"><i class="fas fa-cog"></i></span> icon. </p>
				<div class="m-image-container">
					<img src="manualresources/ss-4-graphoptions.png">
				</div>
				<ul>
					<li>Display events: toggle events on/off.</li>
					<li>Automatic time scale: the time scale (x-axis) will be automatically adjusted as time progresses.</li>
					<li>Custom time range slider: Use this to show more (or less) of the timeline. Adjusting this will turn off automating time scaling.</li>
					<li>PD effect estimation: In Eleveld propofol model, the display of BIS 40-60 margins appears. This is the range of CE values to achieve BIS 40-60. In Complex mode, 2 more options are available: "PTOL 50-90" or "NSRI 20-50" margin display.</li>
				</ul>

			</section>
			<section id="4-4" data-heading="Fullscreen graph">
				<p class="m-h2">Fullscreen graph</p>
				<p>Sometimes, it is advantageous to hold your mobile phone sideways and maximize the graph to fullscreen. In this fullscreen display mode, the user inputs and controls, such as setting the CP/CE target or manual bolus or infusion entry fields are hidden. The important data, such as CP, CE, and infusion rate will still be displayed, on right side of screen. In addition, grey bars will appear at the bottom of the fullscreen graph to visualize the infusion rate changes over time.</p>
				<div class="m-image-container">
					<img src="manualresources/ss-4-fullscreen.png">
				</div>
				<ol type="A">
					<li>Info box display toggle: show/hide the info box.</li>
					<li>Close button: exits fullscreen.</li>
					<li>Options button: alters the fullscreen graph settings.</li>
				</ol>
				<p class="m-h3">iPhones & other devices</p>
				<p>On iPhones, fullscreen mode will not automatically turn your display sideways/landscape. Please check to have auto-rotate on and turn your phone sideways. On Android, fullscreen mode is in landscape like watching a video. On most desktop browsers, fullscreen mode is supported meaning that the browser window containing the graph will be maximized.</p> 
				<p class="m-h3">Showing/hiding the info box</p>
				<p>An info box containing drug information is displayed by default, to show the time & infusion data. If this hinders your viewing experience or obscures your graph, you can tap on the side arrow toggle <span class="m-icon-inline"><i class="fas fa-chevron-circle-right"></i></span> to hide it. The image below is a fullscreen graph with hidden info box.</p>
				<div class="m-image-container">
					<img src="manualresources/ss-4-fullscreen-noinfo.png">
				</div>
			</section>
			<section id="4-5" data-heading="Isobologram graph">
				<p class="m-h2">Isobologram</p>
				<p>The isobologram graph will be explained in detail in Chapter 7: Complex Mode.</p>
			</section>
		</div><!-- end m-main (ch4)-->
	</div> <!--end m-body-->

	<script>//start script block

setTimeout(function() {
	loadChapterURL();
	updateChapterListings();
},300);

document.querySelectorAll(".m-image-container > img").forEach(function(el) {
	el.setAttribute('onclick',`this.classList.toggle("expand")`)
})

const url = new URL(location);

let state = { chapter: 0};

const options = {
	root: document.querySelector(".main"),
	rootMargin: '-100px 0px 0px 0px',
	threshold: 0
}

/*  obsolete ->
const callback = (entries, observer) => {
	entries.forEach((entry) =>
		console.log(entry))
}

const onIntersect = (entries) => {
	entries.forEach((entry) => {
		let string = entry.target.dataset.heading;
		console.log(string);
	})	
}
*/

function onObserve(entries) {
	entries.forEach((entry) => {
		const direction = calcScrollDirection();
		if (shouldUpdate(entry,direction)) {
			const target = direction === DOWN 
			? getNextSection(entry) 
			: entry.target;
			if (onThisPageArrayId.length>0) highlightOnThisPage(target.id);
			document.querySelector(".m-subheader-left").textContent = target.dataset.heading;
		} 
	})
}

const observer = new IntersectionObserver(onObserve, options);

mainObject = document.getElementById("m-main-chapter1");

activeChapter = 0;

const sections = [...mainObject.querySelectorAll('[data-heading]')];

const DOWN = "DOWN";
const UP = "UP";

let prevScrollTop = 0;

function calcScrollDirection() {
	const { scrollTop } = document.documentElement;
	const direction = prevScrollTop < scrollTop ? DOWN : UP;
	prevScrollTop = scrollTop;
	return direction;
}

function getNextSection(entry) {
	const index = sections.findIndex((section) =>
		section == entry.target);
	return sections[index + 1];
}

function shouldUpdate(entry, direction) {
	return (direction === DOWN && !entry.isIntersecting) || (direction === UP && entry.isIntersecting);
}

sections.forEach((section) => {
	observer.observe(section)
});

//hide all chapters
chapters = document.querySelectorAll(".m-main");

chapters.forEach((chapter) => {
	chapter.style.display = "none";
})

chapters[0].style.display = "block";
//end hide all chapters


function getChapter(number,omithistory,force) {
	if ((number != activeChapter) || (force==1)) {
		activeChapter = number;
		chapters = document.querySelectorAll(".m-main");
		chapters.forEach((chapter) => {
			chapter.style.display = "none";
		})
		mainObject = document.getElementById("m-main-chapter" + number);
		chapters[number].style.display = "block";
		tempNodeList = [...mainObject.querySelectorAll('[data-heading]')];
		sections.length = 0;
		for (tempCount = 0; tempCount < tempNodeList.length; tempCount++) {
			sections.push(tempNodeList[tempCount]);
		}
		sections.forEach((section) => {
			observer.observe(section)
		});
		document.getElementById("chaptername").innerHTML = chapters[number].dataset.name;
		document.getElementById("chapternum").innerHTML = "Chapter " + chapters[number].dataset.number + ":";
		updateOnThisPage();
		if (omithistory != 1) {
			url.searchParams.set("ch", number);
			state.chapter = number;
			history.pushState(state, "", url);
		}
	}
}

window.addEventListener("popstate", (event) => {
	loadChapterURL();
});

function loadChapterURL() {
	tempString = window.location.search;
	tempParams = new URLSearchParams(tempString);
	parameter = tempParams.get("ch");
	if (parameter != undefined) {
		if (parameter != activeChapter) {
			getChapter(parameter,1);
		}
	} else {
		getChapter(0,1);
	}
}


let onThisPageArray = new Array();
let onThisPageArrayId = new Array();
let chapterListings = new Array();

function updateOnThisPage() {
	onThisPageArray.length = 0;
	onThisPageArrayId.length = 0;
	document.getElementById("onthispage").innerHTML = "";
	sections.forEach((section)=> {
    	onThisPageArray.push(section.dataset.heading);
    	onThisPageArrayId.push(section.id);
    });
    let El1 = document.createElement("ul");
	for (count=0;count<onThisPageArray.length;count++) {
    	let El2 = document.createElement("li");
    	let El3 = document.createElement("a");
    	El3.innerHTML = onThisPageArray[count];
    	El3.href = "#" + onThisPageArrayId[count];
    	El2.id = "link" + onThisPageArrayId[count];
    	El2.classList.add("onThisPageLink");
    	El3.setAttribute("onclick","document.getElementById('subheaderdropdown').classList.toggle('active');scrollby();document.querySelector('.m-onthispageexpand').classList.add('hide');");
    	El2.appendChild(El3);
    	El1.appendChild(El2);
	}
	document.getElementById("onthispage").appendChild(El1);
}

function highlightOnThisPage(inputID) {
	if (inputID != undefined) {
		let links = document.querySelectorAll(".onThisPageLink");
		links.forEach((link) => {
			link.classList.remove("active");
		});
		document.getElementById("link" + inputID).classList.add("active");
	}
}

function toggleOnThisPage() {
	document.getElementById("subheaderdropdown").classList.toggle("active");
	if (document.getElementById("subheaderdropdown").classList.contains("active")) {
		document.querySelector(".m-onthispageexpand").classList.remove("hide");
	} else {
		document.querySelector(".m-onthispageexpand").classList.add("hide");
	}
};

function updateChapterListings() {
	let El1 = document.createElement("ul");
	for (count=0; count<chapters.length; count++) {
    	let El2 = document.createElement("li");
    	let El3 = document.createElement("a");
    	string = chapters[count].dataset.number + ". " + chapters[count].dataset.name;
    	El3.innerHTML = string;
    	El2.appendChild(El3);
    	El1.appendChild(El2);
		chapterListings.push(string);
	}
	document.querySelector(".menucontent").appendChild(El1);
}

function scrollby() {
	setTimeout(function() {window.scrollBy(0,-85);},100);
}
function togglemenu2() {
  document.getElementById("hamburgermanual").classList.toggle("change");
  if (document.getElementById("hamburgermanual").classList.contains("change")) {
    document.getElementById("menu2").classList.add("open");
  } else {
    document.getElementById("menu2").classList.remove("open");
  }

}

function loadlanguage(lang) {
	tempHTML = "";
	fetch('chinese.json')
  		.then(function(response) {
    	return response.json();
  	})
  	.then(function(data) {
    	tempHTML=JSON.parse(data.text);
    	document.getElementById("m-main-chapter1").outerHTML = tempHTML;
    	getChapter(1,0,1);
    	twttr.widgets.load();

  	});

}

	</script><!--end of script block-->
	<script src="lz-string.js"></script>
	<script id="twitter-wjs" type="text/javascript" async defer src="//platform.twitter.com/widgets.js"></script>
</body>
</html>

